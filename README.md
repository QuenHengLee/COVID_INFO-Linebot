# COVID_INFO-Linebot 浪疾天涯(畢業專題)

## 大綱
本專案是結合**Python爬蟲**、**Azure LUIS**、**QnA Maker**、**Flask架構**等技術，並將資料呈現於**Line官方帳號的聊天機器人**，在疫情逐漸趨緩且國外旅遊逐漸解封的背景下，作為一個提供完整行前資訊的平台，該系統提供了當地的疫情現況(新聞、近期確診案例數及死亡數)、入境相關法規(疫苗策略、隔離天數)，希望欲出國旅遊的國內民眾能利用本系統減少查找資料的時間。

  
---
### 一、開發背景
本專題經調查後發現，各國間的防疫規範與入境條件不盡相同，網路上提供的資料亦片段零碎且難以整理，並且防疫規定是有時效性的，倘若無詳細且持續更新的資料彙整處，旅客自行搜查的資訊可能出現缺漏或過時的情況。此外，因台灣目前並未全面開放國境，市面上亦無相關的產品與平台可供使用。

於是，本專題決定打造一個整合國內外疫情的資訊服務平台「浪疾天涯」，結合台灣人普遍使用的通訊軟體LINE，即時傳遞國際最新疫情現況。另外，「浪疾天涯」採用聊天機器人的對話模式，讓使用者以口語化操作即可取得資訊，使此服務更加快捷、直覺且人性化。

### 二、主要功能
#### （一） 管理者端
**1. 新增資訊**
（1） 疫情現況
藉由網路爬蟲蒐集世界各地的疫情資料如染疫、死亡人數等，後續進行疫情數據統計並繪製為視覺化圖表。
（2） 國外新聞
透過網路爬蟲蒐羅國際媒體疫情相關的報導並進行中文翻譯。
（3） 入境法規
以網路爬蟲實時抓取各國入境相關規定與疫情規範。
（4） 使用者提問
整理系統無法辨識、回答的使用者提問，並在管理者回答後整理至資料庫。
**2. 更新資料**
每天定時更新各大項(疫情現況、國外新聞、入境法規、管理者回覆)中的資訊內容。
**3. 初始化**
對聊天機器人的自然語言進行訓練與處理，同時記錄未能辨識的語句再加以歸類，另對疫情現況與國外新聞之爬蟲程式做初始化設定。
**4. 推播管理**
根據使用者的設定，進行推播主題管理。
#### （二） 使用者端
**1. 查詢資料**
（1） 疫情現況
使用者可查詢各地的疫情數據、視覺化圖表、以及經彙整分析後的「每日快報圖」。
（2） 國外新聞
提供經中文翻譯後的各國當地疫情新聞報導，以作為出國旅遊的參考。
（3） 入境法規
使用者可查詢旅遊地點的入境規定與疫情規範，以免因疏忽而無法順利出國。
（4） 旅遊行程
提供用戶取自旅行社網站的套裝行程資訊，以及外交部對他國發布之旅遊警示，作為使用者出遊時的參考依據。
（5） 航空機票
提供用戶取自各航空公司的飛機票價與出國注意事項。
**2. 推播**
使用者可自訂關注國家，取得按時推送的疫情資訊或新聞。


### 三、技術組成
LINE提供的Messaging API允許開發人員建立可接收並回覆訊息給使用者的應用程式（俗稱LINE Bot），但由於LINE Bot要求開發者後端伺服器必須採用加密的HTTPS協定，因此本專案透過Flask做為本地端伺服器，再藉由**ngrok建立HTTPS入口提供LINE Bot所需的Webhook URL**；而後端聊天機器人採用**Azure提供的LUIS及QnA Maker分析使用者傳送的自然語言訊息**，並將分析結果透過對應的API Service或事先存放在pgAdmin資料庫的資料，經處理後回傳給使用者，使聊天機器人具備更彈性的操作方式。
* 技術架構圖
 ![](https://i.imgur.com/OGP1QAN.png)

### 四、資料庫設計
*  實體關係圖(ERD)
![](https://i.imgur.com/KKa0PBt.png)
* Relation Model
![](https://i.imgur.com/Xd6qFQ2.png)

### 五、系統完成截圖
**1. 主選單**
![](https://i.imgur.com/GaYM8vr.png)

**2. 每日快報** 
![](https://i.imgur.com/WiwHlom.png)
**3. 疫情現況** 
![](https://i.imgur.com/iaD5EZo.png)

**4. 旅遊資訊**
![](https://i.imgur.com/zSQb2EJ.png)

**5. 最新新聞**
![](https://i.imgur.com/j05xmlM.png)

**6. 推播設定**
![](https://i.imgur.com/I2I3lFR.png)


